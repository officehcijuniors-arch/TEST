const fetch = require('node-fetch');
const fs = require('fs');

(async () => {
  try {
    // JSONP-URL der Liga (ersetze durch die echte)
    const url = 'DEINE_JSONP_URL_HIER'; 

    const res = await fetch(url);
    const text = await res.text();

    // JSONP in reines JSON umwandeln
    const match = text.match(/\((.*)\)/s);
    if (!match) throw new Error('Keine JSON-Daten gefunden');

    const data = JSON.parse(match[1]);

    // Speichern in tabelle.json
    fs.writeFileSync('tabelle.json', JSON.stringify(data, null, 2));
    console.log('tabelle.json erfolgreich aktualisiert.');
  } catch (err) {
    console.error('Fehler beim Abrufen der Daten:', err);
    process.exit(1);
  }
})();
